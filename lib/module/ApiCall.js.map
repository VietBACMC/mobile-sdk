{"version":3,"names":["AppConfig","EncryptedStorage","EndPoints","consoleLog","config","message","environment","console","log","getConfig","appConfig","getItem","JSON","parse","getHostEndPoints","host_staging","host_prod","replacer","key","value","undefined","sendToEndPoint","accessType","url","accessToken","data","authorization","response","fetch","method","headers","body","stringify","ok","status","Error","responseText","json","setConfig","client_id","client_secret","app_id","setItem","getAccessToken","accessToken_Obj","createdTime","created_at","expiresAt","Date","setUTCSeconds","access_token","sendTwoFactor","mobile","Promise","resolve","appSpecific","verification_id","toString","verifyTwoFactor","code","verificationId","verification_code","getBrand","getCatalogue","catalogue","getBalance","cardId","cards","balance","getTransactions","transaction","getCardDetails","createProfile","user","users","createOrder","order","orders","searchCards","getProfile","userId","updateProfile","id","getOrders","user_id","cardCallBack","callBackUrl","token","req"],"sources":["ApiCall.ts"],"sourcesContent":["import { AppConfig } from './Models/AppConfig';\nimport EncryptedStorage from 'react-native-encrypted-storage/lib/typescript/EncryptedStorage';\nimport { EndPoints } from './util/ServerEndPoints';\nimport type { Profile } from './Models/Profile';\nimport type { Order } from './Models/Order';\n\nasync function consoleLog(config: AppConfig, message: string) {\n    if (config && config.environment == 'staging') {\n      console.log(message);\n    }\n  }\n\nasync function getConfig() {\n  let appConfig = new AppConfig('','','','');\n  const config = await EncryptedStorage.getItem('waivpay_sdk_config_app_id');\n  appConfig = JSON.parse(config || '{}');\n  return appConfig;\n}\n\nfunction getHostEndPoints(config: AppConfig) {\n    consoleLog(config, 'API call - getHostEndPoints');\n    if (config!=null && config.environment!=null && config.environment!='') {\n      if (config.environment == 'staging') {\n        return EndPoints.host_staging;\n      } else if (config.environment == 'prod') {\n        return EndPoints.host_prod;\n      } else {\n        return '';\n      }\n    } else {\n      return '';\n    }\n  }\n\n  function replacer(key: string, value: string) {\n    console.log(key);\n    if (value == 'undefined') return undefined;\n    else if (value == null) return undefined;\n    else return value;\n  }\n\n\n  async function sendToEndPoint(config:AppConfig, accessType:string, url:string, accessToken:String, data: string){\n    consoleLog(config, '_________________________________________');\n    consoleLog(config, 'sendToEndPoint ' + accessType + ' ' + url + ' ' + accessToken);\n    consoleLog(config, 'Request');\n    consoleLog(config, data);\n    const authorization = 'Bearer ' + accessToken;\n    const response = await fetch(url, {\n        method: accessType,\n        headers: {\n          'Authorization': authorization,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(JSON.parse(data), replacer)\n      });\n  \n    if (!response.ok) {\n      const message = `An error has occured: ${response.status}`;\n      throw new Error(message);\n    }\n  \n    const responseText = await response.json();\n    consoleLog(config, 'Response');\n    consoleLog(config, responseText);\n    consoleLog(config, '_________________________________________');\n    return responseText;\n  }\n\n  //sets client key,  client secret and app_id in asyncstorage, to be used in subsequent api calls tp Waivpay\nexport async function setConfig(appConfig:AppConfig) {\n    if (appConfig != null && appConfig instanceof AppConfig) {\n      const client_id = appConfig.client_id;\n      const client_secret = appConfig.client_secret;\n      const app_id = appConfig.app_id;\n      const environment = appConfig.environment;\n      if (\n        client_id != null &&\n        client_id !== 'undefined' &&\n        client_secret != null &&\n        client_secret !== 'undefined' &&\n        app_id != null &&\n        app_id !== 'undefined' &&\n        environment != null &&\n        environment !== 'undefined'\n      ) {\n        appConfig = new AppConfig(client_id, client_secret, app_id, environment);\n        await EncryptedStorage.setItem(\n          'waivpay_sdk_config_app_id',\n          JSON.stringify(appConfig),\n        );\n      } else {\n        throw new Error('All parameters need to be passed to set config');\n      }\n    } else {\n      throw new Error(\n        'Please use AppConfig class to pass app configuration parameters',\n      );\n    }\n  }\n\n  // function to get an access token by authenticating with Waivpay Api\n// if there is a saved token in async storage and the token is not yet expired , will return the saved token, otherwise will reauthenticate and fetch a new access token\nexport async function getAccessToken() {\n    const config = await getConfig();\n    consoleLog(config, 'API call - getAccessToken');\n    const accessToken = await EncryptedStorage.getItem('accessToken');\n    if (config != null) {\n      if (typeof accessToken !== 'undefined' && accessToken != null) {\n        const accessToken_Obj = JSON.parse(accessToken);\n        const createdTime = accessToken_Obj.created_at + 6000;\n        const expiresAt = new Date(0); // The 0 there is the key, which sets the date to the epoch\n        expiresAt.setUTCSeconds(createdTime);\n        if (accessToken_Obj.access_token != null && expiresAt > new Date()) {\n          return accessToken_Obj.access_token;\n        }\n      }\n      const url = getHostEndPoints(config) + EndPoints.accessToken;\n      const data =\n        'grant_type=client_credentials&' +\n        'client_id=' +\n        config.client_id +\n        '&client_secret=' +\n        config.client_secret;\n  \n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n        body: data,\n      });\n  \n      if (!response.ok) {\n        const message = `An error has occured: ${response.status}`;\n        throw new Error(message);\n      }\n  \n      const responseText = await response.json();\n      if (responseText) {\n        EncryptedStorage.setItem('accessToken', JSON.stringify(responseText));\n        return responseText.access_token;\n      } else {\n        return null;\n      }\n    } else {\n      throw new Error('Please use AppConfig class and config function to setup app configuration parameters');\n    }\n  }\n  \n  export async function sendTwoFactor(mobile:string) {\n    const config = await getConfig();\n    consoleLog(config, 'API call - sendTwoFactor');\n    return new Promise(async function(resolve) {\n      const accessToken = await getAccessToken();\n      const url = getHostEndPoints(config) + EndPoints.appSpecific + config.app_id + EndPoints.sendTwoFactor;\n      const data = { \"mobile_number\": mobile };\n      const responseText = await sendToEndPoint(config, 'POST', url, accessToken, JSON.stringify(data));\n      if (responseText) {\n        EncryptedStorage.setItem('waivpay_sdk_verificationId', responseText.verification_id.toString());\n        resolve(responseText);\n      } else {\n        resolve(null);\n      }\n    });\n  }\n\n  export async function verifyTwoFactor(code:string) {\n    const config = await getConfig();\n    return new Promise(async function(resolve) {\n      consoleLog(config, 'API call - verifyTwoFactor');\n      const verificationId = await EncryptedStorage.getItem('waivpay_sdk_verificationId');\n      const accessToken = await getAccessToken();\n      const url = getHostEndPoints(config) + EndPoints.appSpecific + config.app_id + EndPoints.sendTwoFactor + '/' + verificationId;\n      const data = {verification_code: code};\n  \n      const responseText = await sendToEndPoint(config, 'PUT', url, accessToken, JSON.stringify(data));\n      if (responseText) {\n        resolve(responseText);\n      } else {\n        resolve(null);\n      }\n    });\n  }\n\n  // get App Details\nexport async function getBrand() {\n  const config = await getConfig();\n  consoleLog(config, 'API call - getBrand');\n  return new Promise(async function(resolve) {\n    const accessToken = await getAccessToken();\n    const url = getHostEndPoints(config) + EndPoints.appSpecific + config.app_id;\n    const responseText = await sendToEndPoint(config, 'GET', url, accessToken, \"\");\n    if (responseText) {\n      resolve(responseText);\n    } else {\n      resolve(null);\n    }\n  });\n}\n\n// get catalogue\nexport async function getCatalogue() {\n  const config = await getConfig();\n  consoleLog(config, 'API call - getCatalogue');\n\n  return new Promise(async function(resolve) {\n    const accessToken = await getAccessToken();\n    const url = getHostEndPoints(config) + EndPoints.appSpecific + config.app_id + EndPoints.catalogue;\n\n    const responseText = await sendToEndPoint(config, 'GET', url, accessToken, \"\");\n    if (responseText) {\n      resolve(responseText);\n    } else {\n      resolve(null);\n    }\n  });\n}\n\nexport async function getBalance(cardId: string) {\n  const config = await getConfig();\n  consoleLog(config, 'API call - getBalance');\n  return new Promise(async function(resolve) {\n    const accessToken = await getAccessToken();\n    const url =\n      getHostEndPoints(config) +\n      EndPoints.appSpecific +\n      config.app_id +\n      EndPoints.cards +\n      '/' +\n      cardId +\n      EndPoints.balance;\n\n    const responseText = await sendToEndPoint(config, 'GET', url, accessToken, '');\n    if (responseText) {\n      resolve(responseText);\n    } else {\n      resolve(null);\n    }\n  });\n}\n\n// get transactions\nexport async function getTransactions(cardId: string) {\n  const config = await getConfig();\n  consoleLog(config, 'API call - getTransactions');\n  return new Promise(async function(resolve) {\n    const accessToken = await getAccessToken();\n    const url =\n      getHostEndPoints(config) +\n      EndPoints.appSpecific +\n      config.app_id +\n      EndPoints.cards +\n      '/' +\n      cardId +\n      EndPoints.transaction;\n    const responseText = await sendToEndPoint(config, 'GET', url, accessToken, '');\n    if (responseText) {\n      resolve(responseText);\n    } else {\n      resolve(null);\n    }\n  });\n}\n\n// get cardDetails\nexport async function getCardDetails(cardId: string) {\n  const config = await getConfig();\n  consoleLog(config, 'API call - getCardDetails');\n  return new Promise(async function(resolve) {\n    const accessToken = await getAccessToken();\n    const url =\n      getHostEndPoints(config) +\n      EndPoints.appSpecific +\n      config.app_id +\n      EndPoints.cards +\n      '/' +\n      cardId;\n    const responseText = await sendToEndPoint(config, 'GET', url, accessToken, '');\n    if (responseText) {\n      resolve(responseText);\n    } else {\n      resolve(null);\n    }\n  });\n}\n\n//create a new user\nexport async function createProfile(user: Profile) {\n  const config = await getConfig();\n  consoleLog(config, 'API call - createProfile');\n    return new Promise(async function(resolve) {\n      const accessToken = await getAccessToken();\n      const url =\n        getHostEndPoints(config) +\n        EndPoints.appSpecific +\n        config.app_id +\n        EndPoints.users;\n\n      const responseText = await sendToEndPoint(config, 'POST', url, accessToken, JSON.stringify(user));\n      if (responseText) {\n        resolve(responseText);\n      } else {\n        resolve(null);\n      }\n    });\n}\n\n//create an order\nexport async function createOrder(order: Order) {\n  const config = await getConfig();\n  consoleLog(config, 'API call - createOrder');\n    return new Promise(async function(resolve) {\n      const accessToken = await getAccessToken();\n      const url =\n        getHostEndPoints(config) +\n        EndPoints.appSpecific +\n        config.app_id +\n        EndPoints.orders;\n\n      const responseText = await sendToEndPoint(config, 'POST', url, accessToken, JSON.stringify(order));\n      if (responseText) {\n         resolve(responseText);\n      }else {\n        resolve(null);\n      }\n    });\n}\n\n// get cards by mobile number\nexport async function searchCards(mobile: string) {\n  const config = await getConfig();\n  consoleLog(config, 'API call - searchCards');\n  return new Promise(async function(resolve) {\n    const accessToken = await getAccessToken();\n    const url =\n      getHostEndPoints(config) +\n      EndPoints.appSpecific +\n      config.app_id +\n      EndPoints.cards +\n      '?mobile_number=' +\n      mobile;\n\n    const responseText = await sendToEndPoint(config, 'GET', url, accessToken, '');\n    if (responseText) {\n      resolve(responseText);\n    } else {\n      resolve(null);\n    }\n  });\n}\n\n// get User Profile\nexport async function getProfile(userId: string) {\n  const config = await getConfig();\n  consoleLog(config, 'API call - getProfile');\n  return new Promise(async function(resolve) {\n    const accessToken = await getAccessToken();\n    const url =\n      getHostEndPoints(config) +\n      EndPoints.appSpecific +\n      config.app_id +\n      EndPoints.users +\n      '/' +\n      userId;\n    const responseText = await sendToEndPoint(config, 'GET', url, accessToken, '');\n    if (responseText) {\n      resolve(responseText);\n    } else {\n      resolve(null);\n    }\n  });\n}\n\n//update a user profile\nexport async function updateProfile(user: Profile) {\n  const config = await getConfig();\n  consoleLog(config, 'API call - updateProfile');\n    if (user.id != null) {\n      return new Promise(async function(resolve) {\n        const accessToken = await getAccessToken();\n        const url =\n          getHostEndPoints(config) +\n          EndPoints.appSpecific +\n          config.app_id +\n          EndPoints.users +\n          '/' +\n          user.id;\n        const responseText = await sendToEndPoint(config, 'PUT', url, accessToken, JSON.stringify(user));\n        if (responseText) {\n          resolve(responseText);\n        } else {\n          resolve(null);\n        }\n      });\n    } else {\n      throw 'Please provide an id for the user';\n    }\n}\n\nexport async function getOrders(user_id: string) {\n  const config = await getConfig();\n  consoleLog(config, 'API call - getOrders');\n\n  return new Promise(async function(resolve) {\n    const accessToken = await getAccessToken();\n    const url =\n    getHostEndPoints(config) +\n    EndPoints.appSpecific +\n    config.app_id +\n    EndPoints.orders +\n    \"?user_id=\" +\n    user_id;\n\n    const responseText = await sendToEndPoint(config, 'GET', url, accessToken, '');\n    if (responseText) {\n      resolve(responseText);\n    } else {\n      resolve(null);\n    }\n  });\n}\n\nexport async function cardCallBack(callBackUrl: string, token: string) {\n  const config = await getConfig();\n  consoleLog(config, 'API call - cardCallBack');\n  return new Promise(async function(resolve) {\n    const accessToken = token;\n    const url = callBackUrl;\n    const req = {\"tokenId\": token};\n    const responseText = await sendToEndPoint(config, 'POST', url, accessToken, JSON.stringify(req));\n\n    if (responseText) {\n      resolve(responseText);\n    } else {\n      resolve(null);\n    }\n  });\n}\n  "],"mappings":"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"}